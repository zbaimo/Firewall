# ===================================================================
# Nginxæ™ºèƒ½é˜²ç«å¢™ç³»ç»Ÿ - é…ç½®æ–‡ä»¶
# Version: 1.2.0
# 
# æ‰€æœ‰è§„åˆ™é…ç½®è¯·é€šè¿‡Webç•Œé¢ç®¡ç†ï¼š
#   - å¨èƒæ£€æµ‹è§„åˆ™: http://your-server:8080/rules
#   - è‡ªå®šä¹‰è§„åˆ™: http://your-server:8080/rules
#   - ç«¯å£è§„åˆ™: http://your-server:8080/ports
#   - é˜²ç«å¢™è§„åˆ™: http://your-server:8080/firewall
# ===================================================================

# ===================================================================
# Nginxæ—¥å¿—é…ç½®
# ===================================================================
nginx:
  access_log: "/var/log/nginx/logs/access.log"
  error_log: "/var/log/nginx/logs/error.log"
  log_format: 'combined'

# ===================================================================
# æ•°æ®åº“é…ç½®
# ===================================================================
database:
  type: "sqlite"
  path: "/data/firewall.db"

# ===================================================================
# Redisç¼“å­˜
# ===================================================================
redis:
  enabled: true
  host: "localhost"
  port: 6379
  db: 0
  password: null

# ===================================================================
# é˜²ç«å¢™åŸºç¡€é…ç½®
# ===================================================================
firewall:
  enabled: true
  os: "auto"
  
  # ç™½åå•ï¼ˆæ°¸ä¸å°ç¦ï¼‰
  whitelist:
    - "127.0.0.1"
    - "::1"
  
  # é»‘åå•ï¼ˆç›´æ¥å°ç¦ï¼‰
  blacklist: []

# ===================================================================
# æŒ‡çº¹è¯†åˆ«
# ===================================================================
fingerprint:
  base_fields:
    - ip
    - user_agent
  
  behavior_fields:
    - request_path
    - request_method
    - status_code
  
  retention_days: 3

# ===================================================================
# å¨èƒè¯„åˆ†ç³»ç»Ÿ
# ===================================================================
scoring_system:
  enabled: true
  score_decay_hours: 24
  score_decay_rate: 0.5
  
  # å°ç¦é˜ˆå€¼
  ban_thresholds:
    temporary_ban: 60
    extended_ban: 100
    permanent_ban: 150
  
  # å°ç¦æ—¶é•¿ï¼ˆç§’ï¼‰
  ban_durations:
    temporary_ban: 3600
    extended_ban: 86400
    permanent_ban: null

# ===================================================================
# IPåœ°ç†ä½ç½®
# ===================================================================
geo_location:
  enabled: true
  database_path: "GeoLite2-City.mmdb"
  anomaly_threshold: 1000

# ===================================================================
# å®¡è®¡æ—¥å¿—
# ===================================================================
audit:
  enabled: true
  file: "logs/audit.log"
  max_size_mb: 100

# ===================================================================
# æ•°æ®å¯¼å‡º
# ===================================================================
export:
  directory: "exports"
  retention_days: 30

# ===================================================================
# ç³»ç»Ÿæ—¥å¿—
# ===================================================================
logging:
  level: "INFO"
  file: "logs/firewall.log"
  max_size_mb: 100
  backup_count: 5

# ===================================================================
# Webç®¡ç†åå°
# ===================================================================
web_dashboard:
  enabled: true
  host: "0.0.0.0"
  port: 8080
  secret_key: "CHANGE_ME_TO_RANDOM_SECRET_KEY"  # âš ï¸ ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹

# ===================================================================
# ç”¨æˆ·è®¤è¯
# ===================================================================
authentication:
  enabled: true
  password_salt: "CHANGE_ME_TO_RANDOM_SALT"     # âš ï¸ ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹
  session_timeout_hours: 24

# ===================================================================
# å®æ—¶å‘Šè­¦ï¼ˆå¯é€‰ï¼‰
# ===================================================================
alerts:
  enabled: false
  
  email:
    enabled: false
    smtp_host: "smtp.gmail.com"
    smtp_port: 587
    username: "your-email@gmail.com"
    password: "your-app-password"
    from_addr: "firewall@yourdomain.com"
    to_addrs:
      - "admin@yourdomain.com"
  
  webhook:
    enabled: false
    url: "https://your-webhook-url"
  
  telegram:
    enabled: false
    bot_token: "your-bot-token"
    chat_id: "your-chat-id"

# ===================================================================
# è‡ªåŠ¨è§£å°
# ===================================================================
auto_unban:
  enabled: true
  check_interval: 300

# ===================================================================
# ğŸ“ é…ç½®è¯´æ˜
# ===================================================================
#
# ğŸ”§ æ‰€æœ‰è§„åˆ™é…ç½®ç°åœ¨é€šè¿‡Webç•Œé¢ç®¡ç†ï¼š
#
#   å¨èƒæ£€æµ‹è§„åˆ™ï¼ˆSQLæ³¨å…¥ã€XSSã€æ‰«æç­‰ï¼‰ï¼š
#     ğŸ‘‰ http://your-server:8080/rules
#
#   è‡ªå®šä¹‰è¯„åˆ†è§„åˆ™ï¼ˆæ—¶é—´è§„åˆ™ã€è¡Œä¸ºè§„åˆ™ç­‰ï¼‰ï¼š
#     ğŸ‘‰ http://your-server:8080/rules
#
#   ç«¯å£è§„åˆ™ï¼ˆå¼€æ”¾ã€å…³é—­ã€é˜»æ­¢ï¼‰ï¼š
#     ğŸ‘‰ http://your-server:8080/ports
#
#   é˜²ç«å¢™æ“ä½œï¼ˆå°ç¦ã€è§£å°ã€æ‰¹é‡ï¼‰ï¼š
#     ğŸ‘‰ http://your-server:8080/firewall
#
# ğŸš€ æˆ–ä½¿ç”¨CLIå·¥å…·ï¼š
#   docker exec nginx-firewall python tools/firewall_cli.py --help
#
# âš ï¸ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰å¿…é¡»ï¼š
#   1. ä¿®æ”¹ secret_key ä¸ºéšæœºå€¼
#   2. ä¿®æ”¹ password_salt ä¸ºéšæœºå€¼
#   3. é…ç½®æ­£ç¡®çš„ nginx.access_log è·¯å¾„
#   4. åœ¨Webç•Œé¢æ·»åŠ æ£€æµ‹è§„åˆ™
#
# ğŸ“– è¯¦ç»†æ–‡æ¡£ï¼š
#   - README.md - é¡¹ç›®ä»‹ç»
#   - QUICK_START.md - å¿«é€Ÿå¼€å§‹
#   - IPTABLES_FIREWALL_GUIDE.md - iptablesæŒ‡å—
#   - FIREWALL_CLI_GUIDE.md - CLIå·¥å…·æ‰‹å†Œ
#
# ===================================================================
